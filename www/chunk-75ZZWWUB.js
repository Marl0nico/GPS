import{a as W}from"./chunk-TD3JY72H.js";import{C as U,D as H,E as T,F as O,G as L,H as G,I as A,J as D,K as $,M as N,P as q,R as z,S as B,a as u,b as _,c as w,d as C,e as y,f as o,g as n,i as d,j as v,k as r,l as b,m as x,n as P,o as M,p as I,q as E,w as k,x as S,y as F}from"./chunk-B4DD76D7.js";import"./chunk-JKUZEURV.js";import"./chunk-FF3WZLYK.js";import"./chunk-OP6SZRYM.js";import"./chunk-O4E3N4VP.js";import"./chunk-ANO5QKP5.js";import"./chunk-RCK666N5.js";import"./chunk-4WFVMWDK.js";import"./chunk-YXW5CBGZ.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{e as c}from"./chunk-JHI3MBHO.js";function R(e){e.CapacitorUtils.Synapse=new Proxy({},{get(h,t){return new Proxy({},{get(a,i){return(l,s,m)=>{let p=e.Capacitor.Plugins[t];if(p===void 0){m(new Error(`Capacitor plugin ${t} not found`));return}if(typeof p[i]!="function"){m(new Error(`Method ${i} not found in Capacitor plugin ${t}`));return}c(null,null,function*(){try{let g=yield p[i](l);s(g)}catch(g){m(g)}})}}})}})}function V(e){e.CapacitorUtils.Synapse=new Proxy({},{get(h,t){return e.cordova.plugins[t]}})}function j(e=!1){window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?R(window):window.cordova!==void 0&&V(window)}var f=W("Geolocation",{web:()=>import("./chunk-PCH6YLH5.js").then(e=>new e.GeolocationWeb)});j();function Y(e,h){if(e&1&&(o(0,"div")(1,"p"),r(2),n(),o(3,"p"),r(4),n()()),e&2){let t=v();u(2),b("Latitud: ",t.latitud,""),u(2),b("Longitud: ",t.longitud,"")}}var ut=(()=>{class e{constructor(t){this.firestore=t,this.nombre="",this.latitud=null,this.longitud=null,this.ubicacionActivada=!1}ngOnInit(){return c(this,null,function*(){yield f.requestPermissions(),this.getCurrentLocation()})}getCurrentLocation(){return c(this,null,function*(){try{let t=yield f.getCurrentPosition({enableHighAccuracy:!0,timeout:5e3,maximumAge:0});this.latitud=t.coords.latitude,this.longitud=t.coords.longitude,console.log("Latitud:",this.latitud),console.log("Longitud:",this.longitud)}catch(t){console.error("Error al obtener ubicaci\xF3n",t)}})}activarUbicacion(){return c(this,null,function*(){this.ubicacionActivada=!0,yield this.getCurrentLocation()})}desactivarUbicacion(){this.ubicacionActivada=!1,this.latitud=null,this.longitud=null}abrirGoogle_Maps(){if(this.latitud!==null&&this.longitud!==null){let t=`https://www.google.com/maps?q=${this.latitud},${this.longitud}`;window.open(t,"_blank")}else alert("Ubicaci\xF3n no disponible")}enviarUbicacion_Firebase(){return c(this,null,function*(){if(!this.nombre){alert("Por favor ingresa tu nombre");return}if(this.latitud===null||this.longitud===null){alert("Primero debes obtener tu ubicaci\xF3n.");return}let t=`https://www.google.com/maps?q=${this.latitud},${this.longitud}`;try{let a=B(this.firestore,"ubicaciones");yield z(a,{nombre:this.nombre,latitud:this.latitud,longitud:this.longitud,url:t,fecha:new Date}),alert("Ubicaci\xF3n subida correctamente a la base de datos en Firebase"),this.nombre=""}catch(a){console.error("Error al subir ubicaci\xF3n a la base de datos de Firebase:",a),alert("Error al subir ubicaci\xF3n a la base de datos en Firebase")}})}static{this.\u0275fac=function(a){return new(a||e)(_(q))}}static{this.\u0275cmp=w({type:e,selectors:[["app-home"]],decls:20,vars:2,consts:[[1,"ion-padding"],["label","Nombre:","placeholder","Escribe tu nombre","type","text",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"],[4,"ngIf"]],template:function(a,i){a&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),r(3,"Ubicaci\xF3n"),n()()(),o(4,"ion-content",0)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),r(8,"Informaci\xF3n del usuario"),n()(),o(9,"ion-card-content")(10,"ion-input",1),M("ngModelChange",function(s){return P(i.nombre,s)||(i.nombre=s),s}),n(),o(11,"ion-button",2),d("click",function(){return i.activarUbicacion()}),r(12,"Obtener ubicaci\xF3n"),n(),o(13,"ion-button",2),d("click",function(){return i.abrirGoogle_Maps()}),r(14,"Ver en Google Maps"),n(),o(15,"ion-button",3),d("click",function(){return i.enviarUbicacion_Firebase()}),r(16,"Enviar ubicaci\xF3n"),n(),o(17,"ion-button",4),d("click",function(){return i.desactivarUbicacion()}),r(18,"Desactivar ubicaci\xF3n"),n(),C(19,Y,5,2,"div",5),n()()()),a&2&&(u(10),x("ngModel",i.nombre),u(9),y("ngIf",i.latitud&&i.longitud))},dependencies:[E,I,F,k,S,A,$,D,G,H,O,L,T,U,N],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]})}}return e})();export{ut as HomePage};
