import{a as W}from"./chunk-TD3JY72H.js";import{C as F,D as H,E as L,F as T,G as U,H as O,I as G,J as D,K as $,M as A,P as N,R as q,S as z,a as u,b as h,c as _,d as w,e as C,f as o,g as i,i as d,j as x,k as a,l as b,m as y,n as P,o as E,p as M,q as I,w as v,x as S,y as k}from"./chunk-UTUXXZ6E.js";import"./chunk-JKUZEURV.js";import"./chunk-FF3WZLYK.js";import"./chunk-OP6SZRYM.js";import"./chunk-O4E3N4VP.js";import"./chunk-ANO5QKP5.js";import"./chunk-RCK666N5.js";import"./chunk-4WFVMWDK.js";import"./chunk-YXW5CBGZ.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{e as c}from"./chunk-JHI3MBHO.js";function R(t){t.CapacitorUtils.Synapse=new Proxy({},{get(f,e){return new Proxy({},{get(r,n){return(l,s,m)=>{let p=t.Capacitor.Plugins[e];if(p===void 0){m(new Error(`Capacitor plugin ${e} not found`));return}if(typeof p[n]!="function"){m(new Error(`Method ${n} not found in Capacitor plugin ${e}`));return}c(null,null,function*(){try{let g=yield p[n](l);s(g)}catch(g){m(g)}})}}})}})}function V(t){t.CapacitorUtils.Synapse=new Proxy({},{get(f,e){return t.cordova.plugins[e]}})}function B(t=!1){window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?R(window):window.cordova!==void 0&&V(window)}var j=W("Geolocation",{web:()=>import("./chunk-PCH6YLH5.js").then(t=>new t.GeolocationWeb)});B();function Y(t,f){if(t&1&&(o(0,"div")(1,"p"),a(2),i(),o(3,"p"),a(4),i()()),t&2){let e=x();u(2),b("Latitud: ",e.latitude,""),u(2),b("Longitud: ",e.longitude,"")}}var ue=(()=>{class t{constructor(e){this.firestore=e,this.nombre="",this.latitude=null,this.longitude=null,this.locationEnabled=!1}getCurrentLocation(){return c(this,null,function*(){try{let e=yield j.getCurrentPosition({enableHighAccuracy:!0,timeout:5e3,maximumAge:0});this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,console.log("Latitude:",this.latitude),console.log("Longitude:",this.longitude)}catch(e){console.error("Error getting location",e)}})}enableLocation(){return c(this,null,function*(){this.locationEnabled=!0,yield this.getCurrentLocation()})}disableLocation(){this.locationEnabled=!1,this.latitude=null,this.longitude=null}abrirEnGoogleMaps(){if(this.latitude!==null&&this.longitude!==null){let e=`https://www.google.com/maps?q=${this.latitude},${this.longitude}`;window.open(e,"_blank")}else alert("Ubicaci\xF3n no disponible")}subirUbicacionAFirebase(){return c(this,null,function*(){if(!this.nombre){alert("Por favor ingresa tu nombre.");return}if(this.latitude===null||this.longitude===null){alert("Primero debes obtener tu ubicaci\xF3n.");return}let e=`https://www.google.com/maps?q=${this.latitude},${this.longitude}`;try{let r=z(this.firestore,"ubicaciones");yield q(r,{nombre:this.nombre,latitud:this.latitude,longitud:this.longitude,url:e,fecha:new Date}),alert("Ubicaci\xF3n subida correctamente a Firebase"),this.nombre=""}catch(r){console.error("Error al subir ubicaci\xF3n a Firebase:",r),alert("Error al subir ubicaci\xF3n")}})}static{this.\u0275fac=function(r){return new(r||t)(h(N))}}static{this.\u0275cmp=_({type:t,selectors:[["app-home"]],decls:20,vars:2,consts:[[1,"ion-padding"],["label","Tu nombre","placeholder","Escribe tu nombre","type","text",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"],[4,"ngIf"]],template:function(r,n){r&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a(3,"Ubicaci\xF3n"),i()()(),o(4,"ion-content",0)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),a(8,"Informaci\xF3n del usuario"),i()(),o(9,"ion-card-content")(10,"ion-input",1),E("ngModelChange",function(s){return P(n.nombre,s)||(n.nombre=s),s}),i(),o(11,"ion-button",2),d("click",function(){return n.enableLocation()}),a(12,"Obtener ubicaci\xF3n"),i(),o(13,"ion-button",2),d("click",function(){return n.abrirEnGoogleMaps()}),a(14,"Ver en Google Maps"),i(),o(15,"ion-button",3),d("click",function(){return n.subirUbicacionAFirebase()}),a(16,"Subir ubicaci\xF3n"),i(),o(17,"ion-button",4),d("click",function(){return n.disableLocation()}),a(18,"Desactivar ubicaci\xF3n"),i(),w(19,Y,5,2,"div",5),i()()()),r&2&&(u(10),y("ngModel",n.nombre),u(9),C("ngIf",n.latitude&&n.longitude))},dependencies:[I,M,k,v,S,G,$,D,O,H,T,U,L,F,A],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]})}}return t})();export{ue as HomePage};
